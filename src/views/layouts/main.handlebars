<html>
  <head>
    <title>Entrega Final</title>
    <link rel="stylesheet" href="/styles.css">
  </head>
  <body>
    <header>
      {{#if user}}
        <div class="user-info">
          <span>Bienvenido, {{user.first_name}} {{user.last_name}} ({{user.role}})</span>
          <button onclick="logout()" class="logout-btn">Cerrar Sesión</button>
        </div>
      {{/if}}
      
      {{#if showTitle}}
        <h1>LISTADO DE PRODUCTOS</h1>
        <p>Tenga en cuenta que el listado se actualiza en tiempo real</p>
      {{/if}}
    </header>

    {{{body}}}

    {{#if user}}
    <script>
      async function logout() {
        try {
          const response = await fetch('/api/sessions/logout', {
            method: 'POST'
          });
          
          if (response.ok) {
            window.location.href = '/login';
          }
        } catch (error) {
          console.error('Error al cerrar sesión:', error);
          window.location.href = '/login';
        }
      }
    </script>
    {{/if}}
  </body>
</html>
